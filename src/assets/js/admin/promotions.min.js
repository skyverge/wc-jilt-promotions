jQuery(function(t){t.JiltPromotions={},t.JiltPromotions.InstallPluginModal=class{constructor(t){this.options={messageID:t.messageID||"",target:t.target||"",onClose:t.onClose||""},""!==this.options.messageID?(""===this.options.target&&(this.options.target="tmpl-sv-wc-jilt-promotions-"+this.options.messageID+"-modal"),this.initialize(),this.open()):console.log("InstallPluginModal: missing messageID")}initialize(){t("#sv-wc-jilt-install-button-install").on("click",function(l){t.JiltPromotions.InstallPluginModal.onInstall(l)}),t("#sv-wc-jilt-install-modal .modal-close").on("click",function(l){t.JiltPromotions.InstallPluginModal.onClose(l)})}open(){t("#wc-backbone-modal-dialog .modal-close").trigger("click"),new t.WCBackboneModal.View({target:this.options.target})}static onInstall(l){l.preventDefault(),t("#sv-wc-jilt-install-modal .wc-backbone-modal-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t.post(ajaxurl,{action:"sv_wc_jilt_install_jilt",nonce:sv_wc_jilt_prompt_install.nonces.install_plugin,prompt_id:this.options.messageID}).then(function(l){l.success&&l.data.redirect_url?window.location=l.data.redirect_url:(console.error(l),t("#sv-wc-jilt-install-modal article").html(sv_wc_jilt_email_prompt.i18n.install_error),t("#sv-wc-jilt-install-button-install").hide())}).fail(function(){t("#sv-wc-jilt-install-modal article").html(sv_wc_jilt_email_prompt.i18n.install_error),t("#sv-wc-jilt-install-button-install").hide()}).always(function(){t("#sv-wc-jilt-install-modal .wc-backbone-modal-content").unblock()})}static onClose(l){return l.preventDefault(),this.options.onClose&&t(document).trigger(this.options.onClose),!0}}});